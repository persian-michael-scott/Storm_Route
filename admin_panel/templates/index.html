
{% extends '_base.html' %}
{% block content %}
    <div class="grid">
        <article>
            <hgroup>
                <h1>Add New User</h1>
                <h2>Create a new UUID with a subscription duration.</h2>
            </hgroup>
            <form action="{{ url_for('add_user') }}" method="post">
                <label for="description">Description (e.g., John Doe's Pass)</label>
                <input type="text" id="description" name="description" placeholder="User-friendly name" required>
                <label for="duration">Subscription Days</label>
                <input type="number" id="duration" name="duration" value="30" required>
                <button type="submit">Create User</button>
            </form>
        </article>
        <article>
            <hgroup>
                <h1>Search Users</h1>
                <h2>Filter users by description or UUID in real-time.</h2>
            </hgroup>
            <form onsubmit="return false;"> 
                <input type="search" id="search" name="search" placeholder="Start typing to filter...">
            </form>
        </article>
    </div>

    <hgroup>
        <h1>Current Users</h1>
        <h2>{{ users|length }} user(s) found.</h2>
    </hgroup>
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>UUID</th>
                <th>Expires In</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.description }}</td>
                <td>
                    <div class="uuid-container">
                        <code>{{ user.uuid }}</code>
                        <button class="copy-btn" data-uuid="{{ user.uuid }}">Copy</button>
                    </div>
                </td>
                <td>{{ user.expires_in }}</td>
                <td>
                    <form action="{{ url_for('delete_user', uuid=user.uuid) }}" method="post" style="display: inline;">
                        <button type="submit" class="secondary" onclick="return confirm('Are you sure you want to delete this user?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4">No users found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
